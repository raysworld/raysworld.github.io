<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Solve MATLAB Encoding Problem using UTF-8 | 睿</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="Solve MATLAB Encoding Problem using UTF-8" />
<meta name="author" content="Rui Li" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Recently, it is time for me to read &amp; use them again. However, when I re-open those scripts in MATLAB, all the comments (previously written in Chinese) becomes garbled characters." />
<meta property="og:description" content="Recently, it is time for me to read &amp; use them again. However, when I re-open those scripts in MATLAB, all the comments (previously written in Chinese) becomes garbled characters." />
<link rel="canonical" href="http://localhost:4000/2019/07/26/solving-matlab-encoding.html" />
<meta property="og:url" content="http://localhost:4000/2019/07/26/solving-matlab-encoding.html" />
<meta property="og:site_name" content="睿" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-26T00:00:00+08:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Rui Li"},"@type":"BlogPosting","description":"Recently, it is time for me to read &amp; use them again. However, when I re-open those scripts in MATLAB, all the comments (previously written in Chinese) becomes garbled characters.","headline":"Solve MATLAB Encoding Problem using UTF-8","dateModified":"2019-07-26T00:00:00+08:00","datePublished":"2019-07-26T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/07/26/solving-matlab-encoding.html"},"url":"http://localhost:4000/2019/07/26/solving-matlab-encoding.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="睿" />





<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Sans%20SC">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Sans%20TC">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto%20Slab">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Serif%20SC">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Serif%20TC">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto%20Mono">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ZCOOL%20QingKe%20HuangYou">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dancing%20Script">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ma%20Shan%20Zheng">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/skin.css">

<!-- Begin selecting skin -->

  <script>
    const hour = (new Date()).getHours();
    let filename = "";
    if (hour >= 5 && hour < 7) {
      filename = "/assets/css/skin-sunrise.css";
    } else if (hour >= 7 && hour < 17) {
      filename = "/assets/css/skin-daylight.css";
    } else if (hour >= 17 && hour < 19) {
      filename = "/assets/css/skin-sunset.css";
    } else {
      filename = "/assets/css/skin-midnight.css";
    }
    const elem = document.createElement("link");
    elem.setAttribute("rel", "stylesheet");
    elem.setAttribute("type", "text/css");
    elem.setAttribute("href", filename);
    document.getElementsByTagName("head")[0].appendChild(elem);
  </script>

<!-- End selecting skin -->

<script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>

<script async src="https://use.fontawesome.com/releases/v5.15.0/js/all.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons/css/academicons.min.css">

  </head>

  <body>
    <div class="site-container">
      <header class="site-header">
        <div class="wrapper">
  <script>
    function clickSidebarButton() {
      const elem = document.getElementById("site-sidebar")
      if (elem.style.display == "none" || elem.style.display == "") {
        elem.style.display = "block";
      } else {
        elem.style.display = "none";
      }
    }
  </script>
  <a class="site-sidebar-button" onclick="clickSidebarButton()"><i class="far fa-user"></i>
  </a>

  <a class="site-title" rel="author" href="/">睿</a>

  
    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger" title="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <ul class="trigger">
              <li><a class="" href="/about/">About</a></li>
            
              <li class="dropdown" href="#">
                <a href="javascript:void(0)" class="dropbtn">More</a>
                <div class="dropdown-content">
                    <a class="" href="http://accu.cqu.edu.cn/ywb/HOME.htm">CQU</a>
                    <a class="" href="https://www.in.tum.de/i06/home/">TUM@I6</a>
                </div>
              </li>
            </ul>
    </nav>
  
</div>

      </header>
      
      <div class="site-body wrapper">
        <aside class="site-sidebar" id="site-sidebar">
          <div class="sidebar-section"><img src="/img/avatar-icon.jpg" class="author-avatar u-photo align-center" alt="Rui LI">
  </div>

<div class="sidebar-section">
  <ul class="contact-list">
    <li class="p-name"><i class="sidebar-icon fas fa-at"></i><span>Rui LI</span></li>
    <li><a class="u-email" href="mailto:raysworld[AT]outlook.com"><i class="sidebar-icon fas fa-envelope"></i><span>raysworld[AT]outlook.com</span></a></li>
  </ul>
</div>

<div class="sidebar-section feed-subscribe">
  <a href="/feed.xml">
    <i class="sidebar-icon fas fa-rss"></i><span>Subscribe</span>
  </a>
</div>

<div class="sidebar-section">
    <ul class="social-icons">
      <li>
          <a class="social-icon" href="https://github.com/raysworld"><i class="fab fa-github fa-2x" title="GitHub"></i></a>
        </li><li>
          <a class="social-icon" href="https://www.linkedin.com/in/睿-李-406922b1/"><i class="fab fa-linkedin fa-2x" title="LinkedIn"></i></a>
        </li><li>
          <a class="social-icon" href="https://orcid.org/0000-0002-8877-8524"><i class="ai ai-orcid fa-2x" title="ORCID"></i></a>
        </li><li>
          <a class="social-icon" href="https://scholar.google.com/citations?user=2UqidQYAAAAJ"><i class="ai ai-google-scholar fa-2x" title="Google Scholar"></i></a>
        </li><li>
          <a class="social-icon" href="https://publons.com/researcher/2336828/rui-li/"><i class="ai ai-publons fa-2x" title="Publons"></i></a>
        </li>
    </ul>
  </div>
        </aside>
        <main class="site-main" id="site-main" aria-label="Content">
          <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">

    <h1 class="post-title p-name" itemprop="name headline">Solve MATLAB Encoding Problem using UTF-8</h1>
    <p class="post-meta"><time class="dt-published" datetime="2019-07-26T00:00:00+08:00" itemprop="datePublished">
        Jul 26, 2019
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Rui Li</span></span></p>

  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Previously I wrote some MATLAB scripts with comments in Chinese. At that time I used Windows 10 with China/simplified Chinese region/language setting. After finishing that work, I pushed those codes to my Github repository for a later use.</p>

<p>Recently, it is time for me to read &amp; use them again. However, when I re-open those scripts in MATLAB, all the comments (previously written in Chinese) becomes garbled characters. It is really annoying without these comments, because I named those scripts like <code class="highlighter-rouge">script_001.m</code>, <code class="highlighter-rouge">script_002.m</code>, <code class="highlighter-rouge">script_003.m</code>… Without the comments, I have to read the source codes line by line to regain knowledge about what the differences between them are.</p>

<p>After some searching work, I found that I switched to the English version of Windows 10, where the default encoding character set is different from the simplified Chinese version. But for some reason, I cannot change back to the previous version. So I tried to find a solution for restoring the comments in my current system settings.</p>

<p>The first thing is to figure out what encoding the previous MATLAB used for my codes. With VS Code, it is really an easy work. Just open the <code class="highlighter-rouge">.m</code> script with VS Code, at the bottom-right corner, click on the current encoding name (e.g. UTF-8), then a drop-down menu will appear asking you to reopen the file with another encoding. After clicking on that, VS Code will guess what is the best suitable option for your file.  For my case, the original encoding is GB2312. Now I need to save it with UTF-8. Again you simply click on the encoding name and select “Save with Encoding” and then choose UTF-8. Now the scripts should be saved in UTF-8 encoding.</p>

<p><img src="https://raw.githubusercontent.com/raysworld/raysworld.github.io/master/img/post-matlab-encoding-01.png" alt="post-matlab-encoding-01" /></p>

<p>However, MATLAB still does not recognise the characters after the conversion. After some further search [1], I noticed that MATLAB does not use UTF-8 as default encoding (instead, windows-1252). Now the problem becomes how to change the MATLAB default encoding to UTF-8. The answer is also in that page. The steps are listed as below:</p>

<ol>
  <li>
    <p>Navigate to <code class="highlighter-rouge">(MATLAB_installation_path)\(MATLAB_version)\bin</code>. There will be a <code class="highlighter-rouge">lcdata.xml</code> in it. If you use R2017 or later, there will be also a <code class="highlighter-rouge">lcdata_utf8.xml</code> in the folder. In that case, rename the <code class="highlighter-rouge">lcdata.xml</code> to <code class="highlighter-rouge">lcdata.xml.bak</code>, duplicate <code class="highlighter-rouge">lcdata_utf8.xml</code> and rename one of them to <code class="highlighter-rouge">lcdata.xml</code>.</p>
  </li>
  <li>
    <p>Open <code class="highlighter-rouge">lcdata.xml</code>. Search and find the encoding you are using. For my case, it is “windows-1252”. You may find it in MATLAB by typing <code class="highlighter-rouge">feature('DefaultCharacterSet')</code>.</p>
  </li>
  <li>
    <p>Comment the following tag:</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;encoding</span> <span class="na">name=</span><span class="s">"windows-1252"</span> <span class="na">jvm_encoding=</span><span class="s">"Cp1252"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;encoding_alias</span> <span class="na">name=</span><span class="s">"1252"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/encoding&gt;</span>
</code></pre></div>    </div>

    <p>For <code class="highlighter-rouge">.xml</code> files, after commenting it should look like this:</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- &lt;encoding name="windows-1252" jvm_encoding="Cp1252"&gt;
	&lt;encoding_alias name="1252"/&gt;
&lt;/encoding&gt; --&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Search and find the tag for UTF-8, change it from</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;encoding</span> <span class="na">name=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;encoding_alias</span> <span class="na">name=</span><span class="s">"utf8"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/encoding&gt;</span>
</code></pre></div>    </div>

    <p>to</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;encoding</span> <span class="na">name=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;encoding_alias</span> <span class="na">name=</span><span class="s">"utf8"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;encoding_alias</span> <span class="na">name=</span><span class="s">"windows-1252"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/encoding&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>Now MATLAB should use UTF-8 as its default encoding.</p>

<h5 id="references">References</h5>

<p>[1] https://ww2.mathworks.cn/matlabcentral/answers/280988-how-do-i-get-my-matlab-editor-to-read-utf-8-characters-utf-8-characters-in-blank-squares-in-editors</p>


  </div>

  <footer class="post-footer">
    

    
      <div class="post-meta">
        <i class="fas fa-tags"></i>
        <ul class="post-taxonomies post-tags">
          
          
            <li class="post-tag">
              
              <a href="/tags/#matlab">matlab</a>
            </li>
          
            <li class="post-tag">
              
              <a href="/tags/#encoding">encoding</a>
            </li>
          
        </ul>
      </div>
    
  </footer>

  
  
</article>

          <footer class="site-footer">
            <div class="footer-col-wrapper">

  <div class="footer-col">
    <div class="copyright">
      
      
      
      
      <p>Copyright © 2019&nbsp;-&nbsp;2022 Rui LI; All rights reserved.</p>
      
    </div>
    <p>
      Powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/ngzhio/jekyll-theme-hamilton">Hamilton</a>
    </p>
  </div>

  <div class="footer-col">
    <p>上善若水，厚德载物.</p>
  </div>
</div>

          </footer>
        </main>
      </div>
    </div>
  </body>

</html>
